/**
 * jquery-simple-datetimepicker (jquery.simple-dtpicker.js)
 * (c) Masanori Ohgita - 2013.
 * https://github.com/mugifly/jquery-simple-datetimepicker
 */
(function(c){var u={en:{days:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],sep:"-",format:"YYYY-MM-DD hh:mm",prevMonth:"Previous month",nextMonth:"Next month",today:"Today"},ja:{days:["日","月","火","水","木","金","土"],months:["01","02","03","04","05","06","07","08","09","10","11","12"],sep:"/",format:"YYYY/MM/DD hh:mm"},ru:{days:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],format:"DD.MM.YYYY hh:mm"},br:{days:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],format:"DD/MM/YYYY hh:mm"},pt:{days:["dom","seg","ter","qua","qui","sex","sáb"],months:["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},cn:{days:["日","一","二","三","四","五","六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},de:{days:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Jan","Feb","März","Apr","Mai","Juni","Juli","Aug","Sept","Okt","Nov","Dez"],format:"DD.MM.YYYY hh:mm"},sv:{days:["Sö","Må","Ti","On","To","Fr","Lö"],months:["Jan","Feb","Mar","Apr","Maj","Juni","Juli","Aug","Sept","Okt","Nov","Dec"]},id:{days:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],months:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agu","Sep","Okt","Nov","Des"]},it:{days:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],months:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],format:"DD/MM/YYYY hh:mm"},tr:{days:["Pz","Pzt","Sal","Çar","Per","Cu","Cts"],months:["Ock","Şub","Mar","Nis","May","Haz","Tem","Agu","Eyl","Ekm","Kas","Arlk"]},es:{days:["dom","lun","mar","miér","jue","vié","sáb"],months:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],format:"DD/MM/YYYY hh:mm"},ko:{days:["일","월","화","수","목","금","토"],months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]},nl:{days:["zo","ma","di","wo","do","vr","za"],months:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"],format:"DD-MM-YYYY hh:mm"},cz:{days:["Ne","Po","Út","St","Čt","Pá","So"],months:["Led","Úno","Bře","Dub","Kvě","Čer","Čvc","Srp","Zář","Říj","Lis","Pro"],format:"DD.MM.YYYY hh:mm"},fr:{days:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],format:"DD-MM-YYYY hh:mm"},pl:{days:["N","Pn","Wt","Śr","Cz","Pt","So"],months:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],sep:"-",format:"YYYY-MM-DD hh:mm",prevMonth:"Poprzedni miesiąc",nextMonth:"Następny miesiąc",today:"Dzisiaj"}};var m=[];var s=[];var b=-1;var f=function(w){return c(w).closest(".datepicker")};var q=function(x){var w=f(x);if(w.data("inputObjectId")!=null){return c(s[w.data("inputObjectId")])}return null};var p=function(y){var x=f(y);var w=new Date();j(x,{isAnim:true,isOutputToInputObject:true},w.getFullYear(),w.getMonth(),w.getDate(),w.getHours(),w.getMinutes())};var h=function(C){var z=f(C);var x=e(z);var A=new Date(x.getFullYear(),x.getMonth(),0).getDate();if(A<x.getDate()){x.setDate(A)}j(z,{isAnim:true,isOutputToInputObject:true},x.getFullYear(),x.getMonth()-1,x.getDate(),x.getHours(),x.getMinutes());var w=new Date();var B=w.getFullYear()==x.getFullYear();var y=B&&w.getMonth()==x.getMonth();if(!y||!z.data("futureOnly")){if(A<x.getDate()){x.setDate(A)}j(z,{isAnim:true,isOutputToInputObject:true},x.getFullYear(),x.getMonth()-1,x.getDate(),x.getHours(),x.getMinutes())}};var a=function(z){var x=f(z);var w=e(x);var y=new Date(w.getFullYear(),w.getMonth()+1,0).getDate();if(y<w.getDate()){w.setDate(y)}j(x,{isAnim:true,isOutputToInputObject:true},w.getFullYear(),w.getMonth()+1,w.getDate(),w.getHours(),w.getMinutes())};var l=function(y,w,x){if(y=="default"){y=k(w,"format");if(x){y=y.substring(0,y.search(" "))}}return y};var o=function(x){if(x<99){var w=new Date();return parseInt(x)+parseInt(w.getFullYear().toString().substr(0,2)+"00")}return x};var v=function(D,H){if(H!=null){var G=H.replace(/(-|\/)/g,"[-/]").replace(/YYYY/gi,"(\\d{2,4})").replace(/(YY|MM|DD|hh|mm)/g,"(\\d{1,2})").replace(/(M|D|h|m)/g,"(\\d{1,2})");var J=new RegExp(G);var y=J.exec(D);if(y!=null){var F=new Array();var E="";var A="";var G=H;while(G!=null&&0<G.length){var w=G.substring(0,1);G=G.substring(1,G.length);if(A!=w){if(/(YYYY|YY|MM|DD|mm|dd|M|D|h|m)/.test(E)){F.push(E);E=""}else{E=""}}E+=w;A=w}if(E!=""&&/(YYYY|YY|MM|DD|mm|dd|M|D|h|m)/.test(E)){F.push(E)}var x=new Date();var I=false;for(var z=0;z<F.length;z++){if(y.length<z){break}var B=F[z];var C=y[z+1];if(B=="YYYY"){x.setFullYear(o(C));I=true}else{if(B=="YY"){x.setYear(C);I=true}else{if(B=="MM"||B=="M"){x.setMonth(parseInt(C)-1);I=true}else{if(B=="DD"||B=="D"){x.setDate(C);I=true}else{if(B=="hh"||B=="h"){x.setHours(C);I=true}else{if(B=="mm"||B=="m"){x.setMinutes(C);I=true}}}}}}}if(I==true&&isNaN(x)==false&&isNaN(x.getDate())==false){return x}}}var J=/^(\d{2,4})[-\/](\d{1,2})[-\/](\d{1,2}) (\d{1,2}):(\d{1,2})$/;var y=J.exec(D);if(y!==null){y[1]=o(y[1]);x=new Date(y[1],y[2]-1,y[3],y[4],y[5])}else{J=/^(\d{2,4})[-\/](\d{1,2})[-\/](\d{1,2})$/;y=J.exec(D);if(y!==null){y[1]=o(y[1]);x=new Date(y[1],y[2]-1,y[3])}}if(isNaN(x)==false&&isNaN(x.getDate())==false){return x}return false};var d=function(x,D){if(x==null){x=new Date()}var C=x.getFullYear();var w=x.getMonth()+1;var B=x.getDate();var A=x.getHours();var z=x.getMinutes();var D=D.replace(/YYYY/gi,C).replace(/YY/g,C-2000).replace(/MM/g,t(w)).replace(/M/g,w).replace(/DD/g,t(B)).replace(/D/g,B).replace(/hh/g,t(A)).replace(/h/g,A).replace(/mm/g,t(z)).replace(/m/g,z);return D};var r=function(z){var B=q(z);if(B==null){return}var y=e(z);var w=z.data("locale");var A=l(z.data("dateFormat"),w,z.data("dateOnly"));var x=B.val();B.val(d(y,A));if(x!=B.val()){B.trigger("change")}};var e=function(x){var w=f(x);return w.data("pickedDate")};var t=function(w){w=("0"+w).slice(-2);return w};var g=function(y,x,w){j(y,x,w.getFullYear(),w.getMonth(),w.getDate(),w.getHours(),w.getMinutes())};var k=function(w,x){if(typeof u[w][x]!=="undefined"){return u[w][x]}return u.en[x]};var j=function(L,ai,F,w,W,V,ax){var au=new Date();if(V!=null){au=new Date(F,w,W,V,ax,0)}else{if(F!=null){au=new Date(F,w,W)}else{au=new Date()}}var ad=L.data("todayButton");var ao=ai.isAnim;if(L.data("timelistScroll")==false){ao=false}var K=ai.isAnim;if(L.data("animation")==false){K=false}var aw=L.data("futureOnly");var G=L.data("minDate");var M=L.data("maxDate");var ar=ai.isOutputToInputObject;var I=L.data("minuteInterval");var Q=L.data("firstDayOfWeek");var U=L.data("locale");if(!u.hasOwnProperty(U)){U="en"}var A=new Date();var al=new Date(au.getFullYear(),au.getMonth(),1).getDay()-Q;var af=new Date(au.getFullYear(),au.getMonth()+1,0).getDate();var P=new Date(au.getFullYear(),au.getMonth(),0).getDate();var am=new Date(au.getFullYear(),au.getMonth(),0);var D=new Date(au.getFullYear(),au.getMonth()+2,0);var ap=A.getFullYear()==au.getFullYear();var X=ap&&A.getMonth()==au.getMonth();var ab=X&&A.getDate()==au.getDate();var J=L.children(".datepicker_header");var B=L.children(".datepicker_inner_container");var H=L.children(".datepicker_inner_container").children(".datepicker_calendar");var ay=H.children(".datepicker_table");var aj=L.children(".datepicker_inner_container").children(".datepicker_timelist");var Z="";var T=e(L);if(T!=null){if(T.getMonth()!=au.getMonth()||T.getDate()!=au.getDate()){Z="calendar"}else{if(T.getHours()!=au.getHours()||T.getMinutes()!=au.getMinutes()){if(au.getMinutes()==0||au.getMinutes()%I==0){Z="timelist"}}}}c(L).data("pickedDate",au);if(K==true){if(Z=="calendar"){H.stop().queue([]);H.fadeTo("fast",0.8)}else{if(Z=="timelist"){aj.stop().queue([]);aj.fadeTo("fast",0.8)}}}var N=aj.scrollTop();var ah=-1;J.children().remove();var ag=new Date(au.getTime());ag.setMinutes(59);ag.setHours(23);ag.setSeconds(59);ag.setDate(0);if((!aw||!X)&&((G==null)||(G<ag.getTime()))){var O=c("<a>");O.text("<");O.prop("alt",k(U,"prevMonth"));O.prop("title",k(U,"prevMonth"));O.prop("class","prev");O.click(function(){h(L)})}ag.setMinutes(0);ag.setHours(0);ag.setSeconds(0);ag.setDate(1);ag.setMonth(au.getMonth()+1);var S=c("<span>");S.text(au.getFullYear()+" "+k(U,"sep")+" "+k(U,"months")[au.getMonth()]);if((M==null)||(M>ag.getTime())){var E=c("<a>");E.text(">");E.prop("alt",k(U,"nextMonth"));E.prop("title",k(U,"nextMonth"));E.prop("class","next");E.click(function(){a(L)})}if(ad){var C=c("<a/>");C.html("Now");C.addClass("today");C.prop("alt",k(U,"today"));C.prop("title",k(U,"today"));C.click(function(){p(L)});J.append(C)}J.append(O);J.append(S);J.append(E);ay.children().remove();var ak=c("<tr>");ay.append(ak);var x=7+Q;var ae=k(U,"days");for(var aq=0;aq<7;aq++){var av=c("<th>");av.text(ae[((aq+x)%7)]);ak.append(av)}var an=Math.ceil((al+af)/7)*7;var aq=0;if(al<0){aq=-7}var Y=new Date(au.getTime());Y.setHours(0);Y.setMinutes(0);Y.setSeconds(0);for(var at=0;aq<an;aq++){var R=aq+1-al;var aa=X&&R<A.getDate();if(aq%7==0){ak=c("<tr>");ay.append(ak)}var av=c("<td>");av.data("day",R);ak.append(av);if(al>aq){av.text(P+R);av.addClass("day_another_month");av.data("dateStr",am.getFullYear()+"/"+(am.getMonth()+1)+"/"+(P+R));Y.setDate(P+R);Y.setMonth(am.getMonth());Y.setYear(am.getFullYear())}else{if(aq<al+af){av.text(R);av.data("dateStr",(au.getFullYear())+"/"+(au.getMonth()+1)+"/"+R);Y.setDate(R);Y.setMonth(au.getMonth());Y.setYear(au.getFullYear())}else{av.text(R-af);av.addClass("day_another_month");av.data("dateStr",D.getFullYear()+"/"+(D.getMonth()+1)+"/"+(R-af));Y.setDate(R-af);Y.setMonth(D.getMonth());Y.setYear(D.getFullYear())}}if(((aq+x)%7)==0){av.addClass("wday_sun")}else{if(((aq+x)%7)==6){av.addClass("wday_sat")}}if(R==au.getDate()){av.addClass("active")}if(X&&R==A.getDate()){av.addClass("today")}var z=new Date(Y.getTime());z.setHours(23);z.setMinutes(59);z.setSeconds(59);if(((G!=null)&&(G>z.getTime()))||((M!=null)&&(M<Y.getTime()))){av.addClass("out_of_range")}else{if(aw&&aa){av.addClass("day_in_past")}else{av.click(function(){if(c(this).hasClass("hover")){c(this).removeClass("hover")}c(this).addClass("active");var aB=f(c(this));var aA=new Date(c(this).data("dateStr"));var az=e(aB);j(aB,{isAnim:false,isOutputToInputObject:true},aA.getFullYear(),aA.getMonth(),aA.getDate(),az.getHours(),az.getMinutes());if(aB.data("dateOnly")==true&&aB.data("isInline")==false&&aB.data("closeOnSelected")){b=-1;aB.hide()}});av.hover(function(){if(!c(this).hasClass("active")){c(this).addClass("hover")}},function(){if(c(this).hasClass("hover")){c(this).removeClass("hover")}})}}}if(L.data("dateOnly")==true){aj.css("display","none")}else{aj.children().remove();if(H.innerHeight()>0){aj.css("height",H.innerHeight()-10+"px")}Y=new Date(au.getTime());for(var V=0;V<24;V++){for(var ax=0;ax<60;ax+=I){var y=c("<div>");var ac=V<A.getHours()||(V==A.getHours()&&ax<A.getMinutes());var aa=ab&&ac;y.addClass("timelist_item");y.text(t(V)+":"+t(ax));y.data("hour",V);y.data("min",ax);aj.append(y);if(V==au.getHours()&&ax==au.getMinutes()){y.addClass("active");ah=y.offset().top}Y.setHours(V);Y.setMinutes(ax);if(((G!=null)&&(G>Y.getTime()))||((M!=null)&&(M<Y.getTime()))){y.addClass("out_of_range")}else{if(aw&&aa){y.addClass("time_in_past")}else{y.click(function(){if(c(this).hasClass("hover")){c(this).removeClass("hover")}c(this).addClass("active");var aC=f(c(this));var aA=e(aC);var az=c(this).data("hour");var aB=c(this).data("min");j(aC,{isAnim:false,isOutputToInputObject:true},aA.getFullYear(),aA.getMonth(),aA.getDate(),az,aB);if(aC.data("isInline")==false&&aC.data("closeOnSelected")){b=-1;aC.hide()}});y.hover(function(){if(!c(this).hasClass("active")){c(this).addClass("hover")}},function(){if(c(this).hasClass("hover")){c(this).removeClass("hover")}})}}}}if(ao==true){aj.scrollTop(ah-aj.offset().top)}else{aj.scrollTop(N)}}if(K==true){if(Z=="calendar"){H.fadeTo("fast",1)}else{if(Z=="timelist"){aj.fadeTo("fast",1)}}}if(ar==true){r(L)}};var n=function(w,B){var A=c("<div>");A.addClass("datepicker");w.append(A);if(!B.current){B.current=new Date()}else{var E=l(B.dateFormat,B.locale,B.dateOnly);var C=v(B.current,E);if(C){B.current=C}else{B.current=new Date()}}if(B.inputObjectId!=null){A.data("inputObjectId",B.inputObjectId)}A.data("dateOnly",B.dateOnly);A.data("pickerId",m.length);A.data("dateFormat",B.dateFormat);A.data("locale",B.locale);A.data("firstDayOfWeek",B.firstDayOfWeek);A.data("animation",B.animation);A.data("closeOnSelected",B.closeOnSelected);A.data("timelistScroll",B.timelistScroll);A.data("calendarMouseScroll",B.calendarMouseScroll);A.data("todayButton",B.todayButton);A.data("futureOnly",B.futureOnly);var D=Date.parse(B.minDate);if(isNaN(D)){A.data("minDate",null)}else{A.data("minDate",D)}var z=Date.parse(B.maxDate);if(isNaN(z)){A.data("maxDate",null)}else{A.data("maxDate",z)}A.data("state",0);if(5<=B.minuteInterval&&B.minuteInterval<=30){A.data("minuteInterval",B.minuteInterval)}else{A.data("minuteInterval",30)}var x=c("<div>");x.addClass("datepicker_header");A.append(x);var H=c("<div>");H.addClass("datepicker_inner_container");A.append(H);var y=c("<div>");y.addClass("datepicker_calendar");var G=c("<table>");G.addClass("datepicker_table");y.append(G);H.append(y);var F=c("<div>");F.addClass("datepicker_timelist");H.append(F);A.hover(function(){b=c(this).data("pickerId")},function(){b=-1});if(B.calendarMouseScroll){if(window.sidebar){y.bind("DOMMouseScroll",function(J){var I=f(c(this));var K=J.originalEvent.detail;if(K>0){a(I)}else{h(I)}return false})}else{y.bind("mousewheel",function(J){var I=f(c(this));if(J.originalEvent.wheelDelta/120>0){h(I)}else{a(I)}return false})}}m.push(A);g(A,{isAnim:true,isOutputToInputObject:B.autodateOnStart},B.current)};var i=function(){return{current:null,dateFormat:"default",locale:"en",animation:true,minuteInterval:30,firstDayOfWeek:0,closeOnSelected:false,timelistScroll:true,calendarMouseScroll:true,todayButton:true,dateOnly:false,futureOnly:false,minDate:null,maxDate:null,autodateOnStart:true}};c.fn.dtpicker=function(y){var x=new Date();var z=i();z.inputObjectId=undefined;var w=c.extend(z,y);return this.each(function(A){n(c(this),w)})};c.fn.appendDtpicker=function(y){var x=new Date();var z=i();z.inline=false;var w=c.extend(z,y);return this.each(function(F){var J=this;var D=s.length;s.push(J);w.inputObjectId=D;var E,I,H;if(c(J).val()!=null&&c(J).val()!=""){w.current=c(J).val()}var B=c("<div>");if(w.inline==false){B.css("position","absolute")}B.insertAfter(J);var G=m.length;var C=c(B).dtpicker(w);var A=C.children(".datepicker");c(J).data("pickerId",G);c(J).keyup(function(){var N=c(this);var L=c(m[N.data("pickerId")]);if(N.val()!=null&&(N.data("beforeVal")==null||(N.data("beforeVal")!=null&&N.data("beforeVal")!=N.val()))){var M=l(L.data("dateFormat"),L.data("locale"),L.data("dateOnly"));var K=v(N.val(),M);if(K){g(L,{isAnim:true,isOutputToInputObject:false},K)}}N.data("beforeVal",N.val())});c(J).change(function(){c(this).trigger("keyup")});if(w.inline==true){A.data("isInline",true)}else{A.data("isInline",false);C.css({zIndex:100});A.css("width","auto");A.hide();c(J).click(function(){var M=c(this);var L=c(m[M.data("pickerId")]);b=M.data("pickerId");L.show();var K=c(J).parent().css("position");if(K==="relative"||K==="absolute"){L.parent().css("top",M.outerHeight()+2+"px")}else{L.parent().css("top",M.position().top+M.outerHeight()+2+"px");L.parent().css("left",M.position().left+"px")}})}})};c(function(){c("body").click(function(){for(var w=0;w<m.length;w++){var x=c(m[w]);if(b!=w){if(x.data("inputObjectId")!=null&&x.data("isInline")==false){x.hide()}}}})})})(jQuery);